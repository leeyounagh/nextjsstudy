# 커스텀 서버

### 1. 커스텀 서버가 필요한 경우

- next js 웹 애플리케이션을 기존 서버에서 실행하는 경우

기존 웹 애플리케이션을 리팩링해서 next js로 바꿀때, 기존 서버에서 실행되던 로직이나 미들웨어 등을 최대한 유지하고 싶을때 웹사이트의 일부는 next js에서 렌더링 하고 나머지느 다른 곳에서 렌더링하도록 지정할수 있다.

- 멀티네넌시 지원이 필요한 경우

next.js는 멀티 도메인을 지원하며 현재 호스트명에 따라 선택적으로 렌더링하는 기능을 제공한다. 하지만 수천 개에 달하는 도메인을 관리하고 워크플로를 단순화해야 하는 상황이라면 express.js나 fatify의 next.js 멀티 테넌트 미들웨어를 사용하는 것이 더 나을 수도 있다.

- 더 세밀한 제어가 필요한 경우

next.js가 필요한 기능을 대부분 제공하지만 웹 애플리케이션의 복잡도가 증가하면 애플리케이션의 백엔드 코드를 다른방법으로 관리하고 싶을수도 있다. 예를들어 mvc 패턴에 따라 next.js 부분을 view에만 해당하는 코드로 만든다.

### 2. 커스텀 서버의 단점

- vercel에 배포할 수 없다.
- 작은규모의 팀이나 회사에서 일할 경우 이는 치명적일 수도 있다.
